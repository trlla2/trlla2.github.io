<!DOCTYPE html>
<html>
<head>
<title>Pagina de prueba</title>
<link rel="stylesheet" href="base.css">
<link rel="stylesheet" href="game.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,300;1,300&display=swap" rel="stylesheet">
<script>
let game_data;

let current_room=0;
let items_picked=[];

function game(data){
	game_data = data;
	
	document.getElementById("terminal").innerHTML = "<p><strong>¡Bienbenidos a ENTIerrame! </strong>El juego de terror definitivo.</p>";
	document.getElementById("terminal").innerHTML += "<p>Te enquentras en "+game_data.rooms[current_room].name+". ¿Que quieres hacer?</p>";
	
	console.log(data.rooms[0].name);
}
function terminal_out(info){
	document.getElementById("terminal").innerHTML += info; 
	terminal.innnerHTML += info;
	terminal:scrollTop = terminal.scrollHeight;
}
function parseCommand(command){
	switch (command){
		case "ver":
		terminal_out(game_data.rooms[current_room].description);
		break;
		case "ir":
		let doors = "";
		let doors_num = game_data.rooms[current_room].dors.lenght;
		for (let i = 0; i < doors_num;i++){
		 doors += game_data.rooms[current_room].doors[i]+", ";
		}
		terminal_out("<p>Puedes ir a: "+ doors +"</p>");
		break;
		deafult:
	}
}
function readAction(){
	let command = document.getElementById("commands").value;
	let instruction_trim= instruction.trim();
	let data = command.trim().split(" ");
	
	if (data.lenght = 0 || instruction_trim == " ") {
		document.getElementById("terminal").innerHTML += "<strong>ERROR</strong> Escribe un comando correcto";
		return;
	}
	
	if ( data.lenght == 1){
		parseCommand(data[0]);
	}
	else
		paseInstruction(data);
	}
	
}
fetch("https://rafaenti.github.io/game.json").then(response => response.json()).then(data => game(data));
</script>
</head>
<body>
<header>
<h1>Roc Allue, pagina de ENTI</h1>
<nav>
<ul>
<li id="menu-presentation"><a href="index.html">Presentacion</a></li>
<li id="menu-hobbies"><a href="hobbies.html">Hobbies</a></li>
<li id="menu-contact"><a href="contact.html">Contacto</a></li>
<li id="menu-cv"><a href="cv.html">CV</a></li>
<li id="menu-game"><a href="game.html">Game</a></li>
</ul>
</nav>
</header>
<main>
<article>
<h2>articulo</h2>
<form>
<div id="terminal">
</div>
<input type="text" id="commands"/>
<input type="submit" value="Accion" onclick="readAction(); return false;" />
</form>
</article>
<aside>	
<h2>aside</h2>
</aside>
</main>
<footer>
<p> Roc Allue Canut (c) <span id="footer-year">2022</span></p>
<script>
document.getElementById("footer-year").innerHTML = new Date().getFullYear();
</script>
</footer>
</body>
</html>